webpackJsonp([7],{73:function(e,t,i){var o,s;i(74),o=i(76);var a=i(77);s=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(s=o=o.default),"function"==typeof s&&(s=s.options),s.render=a.render,s.staticRenderFns=a.staticRenderFns,e.exports=o},74:function(e,t,i){var o=i(75);"string"==typeof o&&(o=[[e.id,o,""]]);i(36)(o,{});o.locals&&(e.exports=o.locals)},75:function(e,t,i){t=e.exports=i(35)(),t.push([e.id,"#mediaAdd{overflow:hidden}#mediaAdd .el-upload{padding-right:28px;padding-top:20px}#mediaAdd .el-upload,#mediaAdd .el-upload-dragger{width:100%}.el-upload-dragger{border-radius:2px;border-style:dashed}.el-upload__tip{text-align:center}",""])},76:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{fileList:[]}},props:{pFileListShow:{default:!0}},methods:{fileUpSuccess:function(e,t,i){var o=this;200!=e.state?o.$notify({title:"失败",message:t.name+" 文件上传失败",type:"error",duration:2e3}):(o.$notify({title:"成功",message:t.name+" 文件上传成功",type:"success",duration:2e3}),o.$bus.$emit("fileUploadSuccess",e.opRes))},fileUpError:function(e,t,i){self.$notify({title:"失败",message:i.name+" 文件上传失败",type:"error",duration:2e3})}},mounted:function(){}}},77:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"mediaAdd"}},[e.pFileListShow?i("h2",{staticClass:"pageTitle"},[e._v("添加媒体")]):e._e(),e._v(" "),i("el-upload",{attrs:{action:"./api/file/upload",drag:"",name:"file",multiple:"","on-success":e.fileUpSuccess,"on-error":e.fileUpError,"file-list":e.fileList,"show-file-list":e.pFileListShow}},[i("i",{staticClass:"el-icon-upload"}),e._v(" "),i("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),i("em",[e._v("点击上传")])]),e._v(" "),i("div",{staticClass:"el-upload__tip",slot:"tip"},[e._v("文件不能超过128M")])])],1)},staticRenderFns:[]}},89:function(e,t){e.exports=window.$},119:function(e,t,i){var o,s;i(120),o=i(122);var a=i(133);s=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(s=o=o.default),"function"==typeof s&&(s=s.options),s.render=a.render,s.staticRenderFns=a.staticRenderFns,e.exports=o},120:function(e,t,i){var o=i(121);"string"==typeof o&&(o=[[e.id,o,""]]);i(36)(o,{});o.locals&&(e.exports=o.locals)},121:function(e,t,i){t=e.exports=i(35)(),t.push([e.id,".mediaPage{margin-left:10px}",""])},122:function(e,t,i){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(123),a=o(s);t.default={data:function(){return{}},components:{fileList:a.default}}},123:function(e,t,i){var o,s;i(124),o=i(126);var a=i(132);s=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(s=o=o.default),"function"==typeof s&&(s=s.options),s.render=a.render,s.staticRenderFns=a.staticRenderFns,e.exports=o},124:function(e,t,i){var o=i(125);"string"==typeof o&&(o=[[e.id,o,""]]);i(36)(o,{});o.locals&&(e.exports=o.locals)},125:function(e,t,i){t=e.exports=i(35)(),t.push([e.id,".funcBtnBar{padding:5px 10px;margin:5px 10px;box-shadow:0 1px 1px rgba(0,0,0,.08)}.fileCard{padding-left:10px}.funcBtnBar .el-button{border-radius:1px}.fileCard .el-card{width:30%;max-width:200px;height:180px;float:left;border-radius:2px;margin-right:10px;margin-top:10px;position:relative}.fileListCon img{max-width:100%}.fileListCon .imgCon{width:100%;height:150px;overflow:hidden;position:relative;background-color:#e5eaf1}.fileListCon .el-checkbox{position:absolute;top:5px;right:5px}.fileListCon .fileName{color:gray;padding:5px 20px 5px 10px;position:relative;border-top:1px solid #f3f2f2}.fileListCon .fileName a{font-size:12px;box-sizing:border-box;width:100%;display:block;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.fileListCon .el-icon-delete{position:absolute;top:5px;right:5px;cursor:pointer}.fileListCon .el-icon-delete:hover{color:red}.fileListCon .fileCard{cursor:pointer;overflow:auto}.delStyle{opacity:.7}#fileListPagination{min-width:300px;overflow:hidden}#fileListPagination .el-pagination{float:right;margin-top:20px;margin-right:20px}.imgCon img{position:absolute;top:50%;width:100%;transform:translateY(-50%)}.fileUpload{padding-right:10px;padding-left:10px}.nofiles{font-size:30px;color:#bbb7b7;text-align:center;padding:50px}",""])},126:function(e,t,i){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(127),a=o(s),l=i(73),n=o(l),r=i(89);t.default={data:function(){return{delShow:!1,page:1,pageSize:10,totalFilesCount:0,fileDetailDialog:!1,files:[],nowFile:{},checkArry:[],uploadState:!1}},propos:{type:{default:"normal"}},components:{fileShow:a.default,mediaAdd:n.default},methods:{showMultiBtn:function(){this.files.length>0&&(this.delShow=!this.delShow)},createCheckArry:function(){for(var e=[],t=0;t<this.files.length;t++)e.push({fid:this.files[t].fid,state:!1});this.checkArry=e},cardClick:function(e){this.delShow?this.checkArry[e].state=!this.checkArry[e].state:(this.nowFile=this.files[e],this.fileDetailDialog=!0)},getFiles:function(){var e=this;e.$http.post("file/getList",{page:e.page,size:e.pageSize}).then(function(t){return 200!=t.data.state?void e.$message.error("文件列表获取失败"):(e.files=t.data.opRes[0],e.totalFilesCount=t.data.opRes[1][0].total,e.createCheckArry(),void e.formatImgUrl())})},delFiles:function(e){var t=this;t.$http.post("file/delete",{fids:JSON.stringify(e)}).then(function(e){200===e.data.state?t.getFiles():t.$message.error("文件删除失败")})},getFilesIndexByFid:function(e){for(var t=-1,i=0;i<this.files.length;i++)if(this.files[i].fid===e){t=i;break}return t},delMultiFiles:function(){var e=[];this.checkArry.forEach(function(t){t.state&&e.push(t.fid)}),this.delFiles(e)},pageChange:function(e){this.page=e,this.getFiles()},uploadFile:function(){this.uploadState=!this.uploadState},formatImgUrl:function(){for(var e=0;e<this.files.length;e++){var t=this.files[e];t.type.indexOf("video")>=0?t.thumbnail="./img/video.png":t.type.indexOf("audio")>=0?t.thumbnail="./img/music.png":t.type.indexOf("image")>=0?t.thumbnail=t.url:t.thumbnail="./img/file.png"}},fileDialogClose:function(){r("#showFileDetail video,#showFileDetail audio").each(function(){this.pause()})}},computed:{hasFiles:function(){return this.files.length>0}},mounted:function(){var e=this;this.getFiles(),this.$bus.$on("fileUploadSuccess",function(){e.getFiles()}),this.$bus.$on("showFileDelete",function(t){e.delFiles([t]),e.fileDetailDialog=!1}),this.$bus.$on("fileShowNext",function(t){var i=e.getFilesIndexByFid(t);i=(i+1)%e.files.length,e.nowFile=e.files[i]}),this.$bus.$on("fileShowPre",function(t){var i=e.getFilesIndexByFid(t);i=(i-1+e.files.length)%e.files.length,e.nowFile=e.files[i]})}}},127:function(e,t,i){var o,s;i(128),o=i(130);var a=i(131);s=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(s=o=o.default),"function"==typeof s&&(s=s.options),s.render=a.render,s.staticRenderFns=a.staticRenderFns,e.exports=o},128:function(e,t,i){var o=i(129);"string"==typeof o&&(o=[[e.id,o,""]]);i(36)(o,{});o.locals&&(e.exports=o.locals)},129:function(e,t,i){t=e.exports=i(35)(),t.push([e.id,".fileShow{min-width:600px}.fileShow .fileShowEditor{float:right;width:300px;margin:0;border-left:1px solid #d8d6d6;padding:10px 15px;height:100%}.fileShow .showImgCon{display:block;overflow:hidden}.fileShow .showImgCon img{max-width:100%;max-height:450px}.fileShow .el-dialog{overflow:hidden}.fileName{font-weight:400}.fileShow .details{font-size:12px;color:#666;border-bottom:1px solid #d8d6d6;padding-bottom:10px}.fileShow .details div{margin-bottom:5px}.fileShow .settings{padding:10px 0}.fileShow .btnS{border-radius:2px;background:#f7f7f7;margin:5px;font-size:25px;color:#b3b3b3;float:right;padding:5px}.fileShow .btnS:hover{color:#fff;background-color:#4a5f80}.fileShow .actions{overflow:hidden;padding-top:10px}.fileShow .actions .deleteBtn{float:left}.showImgCon video{max-width:100%;max-height:100%}",""])},130:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{}},props:{imgObj:[Object],showAction:{defualt:!0}},computed:{filterData:function(){var e=new Date(1e3*this.imgObj.created);return e.getFullYear()+" 年 "+(e.getMonth()+1)+" 月 "+e.getDate()+"日"},filterSize:function(){return this.imgObj.size/1e3+" KB"}},methods:{nextEvent:function(){this.$bus.$emit("fileShowNext",this.imgObj.fid)},preEvent:function(){this.$bus.$emit("fileShowPre",this.imgObj.fid)},deleteFileEvent:function(){this.$bus.$emit("showFileDelete",this.imgObj.fid)}},mounted:function(){}}},131:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"fileShow"},[i("div",{staticClass:"fileShowEditor"},[i("div",{staticClass:"details"},[i("div",{staticClass:"filename"},[i("strong",[e._v("文件名：")]),e._v(e._s(e.imgObj.name))]),e._v(" "),i("div",{staticClass:"filename"},[i("strong",[e._v("文件类型：")]),e._v(" "+e._s(e.imgObj.type))]),e._v(" "),i("div",{staticClass:"uploaded"},[i("strong",[e._v("上传于：")]),e._v(" "+e._s(e.filterData))]),e._v(" "),i("div",{staticClass:"file-size"},[i("strong",[e._v("文件大小：")]),e._v(" "+e._s(e.filterSize)+" ")]),e._v(" "),i("div",{staticClass:"dimensions"},[i("strong",[e._v("分辨率：")]),e._v(" "+e._s(e.imgObj.width)+" × "+e._s(e.imgObj.height))]),e._v(" "),i("div",{staticClass:"filename"},[i("strong",[e._v("Url:")]),e._v(" "+e._s(e.imgObj.url)+" ")])]),e._v(" "),e.showAction?i("div",{staticClass:"actions"},[i("div",{staticClass:"btnS deleteBtn",on:{click:e.deleteFileEvent}},[i("i",{staticClass:"el-icon-delete2"})]),e._v(" "),i("div",{staticClass:"btnS nextBtn",on:{click:e.nextEvent}},[i("i",{staticClass:"el-icon-arrow-right"})]),e._v(" "),i("div",{staticClass:"btnS preBtn",on:{click:e.preEvent}},[i("i",{staticClass:"el-icon-arrow-left"})])]):e._e()]),e._v(" "),i("div",{staticClass:"showImgCon"},[e.imgObj.type.indexOf("image")>=0?i("img",{staticClass:"fileShowImg",attrs:{src:e.imgObj.url,alt:e.imgObj.name}}):e.imgObj.type.indexOf("video")>=0?i("video",{staticClass:"fileShowImg",attrs:{src:e.imgObj.url,controls:"controls"}},[e._v("\n\t\t\t您的浏览器不支持 video 标签。\n\t\t\t")]):e.imgObj.type.indexOf("audio")>=0?i("audio",{staticClass:"fileShowImg",attrs:{src:e.imgObj.url,controls:"controls"}},[e._v("\n\t\t\t您的浏览器不支持 video 标签。\n\t\t\t")]):i("img",{staticClass:"fileShowImg",attrs:{src:e.imgObj.thumbnail,alt:e.imgObj.name}})])])},staticRenderFns:[]}},132:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"filesList"},[i("h2",{staticClass:"pageTitle"},[e._v("媒体库")]),e._v(" "),i("div",{staticClass:"funcBtnBar"},[i("el-button",{on:{click:e.showMultiBtn}},[e._v("批量选择")]),e._v(" "),i("el-button",{on:{click:e.uploadFile}},[e._v("添加")]),e._v(" "),"select"==e.type?e._m(0):e._e(),e._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.delShow,expression:"delShow"}],attrs:{type:"danger"},on:{click:e.delMultiFiles}},[e._v("批量删除")])],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.uploadState,expression:"uploadState"}],staticClass:"fileUpload"},[i("media-add",{attrs:{pFileListShow:!1}})],1),e._v(" "),i("div",{staticClass:"fileListCon"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.hasFiles,expression:"!hasFiles"}],staticClass:"nofiles"},[e._v("暂无文件")]),e._v(" "),i("div",{staticClass:"fileCard ShowCon"},e._l(e.files,function(t,o){return i("el-card",{class:{delStyle:e.delShow},attrs:{"body-style":{padding:"0px"}}},[i("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:e.delShow,expression:"delShow"},{name:"model",rawName:"v-model",value:e.checkArry[o].state,expression:"checkArry[index].state"}],domProps:{value:e.checkArry[o].state},on:{input:function(t){e.checkArry[o].state=t}}}),e._v(" "),i("div",{staticClass:"imgCon",on:{click:function(t){e.cardClick(o)}}},[i("img",{staticClass:"image",attrs:{src:t.thumbnail}})]),e._v(" "),i("div",{staticClass:"fileName"},[i("a",{attrs:{title:t.name}},[e._v(e._s(t.name))]),e._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:!e.delShow,expression:"!delShow"}],staticClass:"el-icon-delete",on:{click:function(i){e.delFiles([t.fid])}}})])],1)}))]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.hasFiles,expression:"hasFiles"}],attrs:{id:"fileListPagination"}},[i("el-pagination",{attrs:{"current-page":e.page,"page-size":e.pageSize,layout:"total, prev, pager, next,jumper",total:e.totalFilesCount},on:{"current-change":e.pageChange}})],1),e._v(" "),i("el-dialog",{directives:[{name:"model",rawName:"v-model",value:e.fileDetailDialog,expression:"fileDetailDialog"}],attrs:{id:"showFileDetail",size:"full",title:"文件详情"},domProps:{value:e.fileDetailDialog},on:{close:e.fileDialogClose,input:function(t){e.fileDetailDialog=t}}},[i("file-show",{attrs:{imgObj:e.nowFile,showAction:!0}})],1)],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-button",{on:{click:e.uploadFile}},[e._v("插入")])}]}},133:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mediaPage"},[i("file-list",{attrs:{pFileListShow:!0}})],1)},staticRenderFns:[]}}});
//# sourceMappingURL=media.min.js.map